<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/prontuario.css"> 
    <title>Profissional de Sa√∫de - Prontu√°rio | VidaPlus</title>
</head>
<body>
<header class="header">
    <div class="logo">VidaPlus</div>
    <nav class="nav-menu">
        <ul class="nav-links">
            <li><a href="/views/home.html">Home</a></li>
            <li><a href="#servicos">Servi√ßos</a></li>
        </ul>
        <div class="nav-buttons" id="navButtons"></div>
    </nav>
</header>

<main class="main-content">
    <div class="page-header">
        <h1 class="page-title">Prontu√°rio do Paciente</h1>
        <p class="page-subtitle">Detalhes do hist√≥rico m√©dico e tratamento do paciente</p>
    </div>

    <div class="tabs">
        <a href="#" class="tab active" data-tab="geral">Geral</a>
        <a href="#" class="tab" data-tab="historico">Hist√≥rico M√©dico</a>
        <a href="#" class="tab" data-tab="exames">Exames</a>
        <a href="#" class="tab" data-tab="diagnosticos">Diagn√≥sticos</a>
        <a href="#" class="tab" data-tab="tratamentos">Tratamentos</a>
    </div>

    <div class="tab-content active" id="geral">
        <h2 class="section-title">Informa√ß√µes Pessoais</h2>
        <div class="form-grid">
            <div class="form-group">
                <label class="form-label">Nome</label>
                <input type="text" class="form-input" value="Sofia Almeida">
            </div>
            <div class="form-group">
                <label class="form-label">Data de Nascimento</label>
                <input type="date" class="form-input" value="1994-05-15">
            </div>
            <div class="form-group">
                <label class="form-label">Sexo</label>
                <select class="form-input">
                    <option value="">Selecione</option>
                    <option value="masculino">Masculino</option>
                    <option value="feminino" selected>Feminino</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Telefone</label>
                <input type="tel" class="form-input" value="+11 94545 5678">
            </div>
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" value="sofia.almeida@email.com">
            </div>
            <div class="form-group">
                <label class="form-label">Endere√ßo</label>
                <input type="text" class="form-input" value="Rua das Flores, 123, Lisboa">
            </div>
        </div>
    </div>

    <div class="tab-content" id="historico">
        <h2 class="section-title">Consultas Anteriores</h2>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>M√©dico</th>
                        <th>Especialidade</th>
                        <th>Motivo</th>
                        <th>Observa√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>10/05/2023</td>
                        <td>Dr. Ricardo Almeida</td>
                        <td>Cl√≠nica Geral</td>
                        <td>Check-up anual</td>
                        <td>Paciente em bom estado geral</td>
                    </tr>
                    <tr>
                        <td>15/08/2023</td>
                        <td>Dra. Sofia Mendes</td>
                        <td>Dermatologia</td>
                        <td>Consulta dermatol√≥gica</td>
                        <td>Avalia√ß√£o de les√µes cut√¢neas</td>
                    </tr>
                    <tr>
                        <td>20/11/2023</td>
                        <td>Dr. Lucas Oliveira</td>
                        <td>Cardiologia</td>
                        <td>Consulta cardiol√≥gica</td>
                        <td>Monitoramento da press√£o arterial</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <h2 class="section-title">Interna√ß√µes</h2>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Data de Entrada</th>
                        <th>Data de Sa√≠da</th>
                        <th>Motivo</th>
                        <th>Hospital</th>
                        <th>Observa√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>05/02/2023</td>
                        <td>12/02/2023</td>
                        <td>Pneumonia</td>
                        <td>Hospital Central</td>
                        <td>Tratamento com antibi√≥ticos</td>
                    </tr>
                    <tr>
                        <td>18/07/2023</td>
                        <td>25/07/2023</td>
                        <td>Cirurgia de apendicite</td>
                        <td>Hospital Regional</td>
                        <td>Recupera√ß√£o p√≥s-operat√≥ria sem complica√ß√µes</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="tab-content" id="exames">
        <h2 class="section-title">Exames Realizados</h2>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Tipo de Exame</th>
                        <th>Resultado</th>
                        <th>Imagens/Laudos</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>15/01/2024</td>
                        <td>Raio-X do T√≥rax</td>
                        <td>Normal</td>
                        <td><a href="#" class="btn-link">Ver laudo</a></td>
                    </tr>
                    <tr>
                        <td>20/02/2024</td>
                        <td>Ultrassonografia Abdominal</td>
                        <td>Sem altera√ß√µes</td>
                        <td><a href="#" class="btn-link">Ver imagens</a></td>
                    </tr>
                    <tr>
                        <td>10/03/2024</td>
                        <td>Resson√¢ncia Magn√©tica do Joelho</td>
                        <td>Les√£o no menisco</td>
                        <td><a href="#" class="btn-link">Ver laudo e imagens</a></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="tab-content" id="diagnosticos">
        <h2 class="section-title">Diagn√≥sticos Registrados</h2>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Diagn√≥stico</th>
                        <th>Observa√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>22/03/2024</td>
                        <td>Hipertens√£o</td>
                        <td>Paciente apresenta press√£o arterial elevada constantemente</td>
                    </tr>
                    <tr>
                        <td>22/03/2024</td>
                        <td>Diabetes Tipo 2</td>
                        <td>N√≠veis de glicose elevados</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="text-center">
            <button class="btn-primary-action" onclick="alert('Adicionar Diagn√≥stico')">
                Adicionar Diagn√≥stico
            </button>
        </div>
    </div>

    <div class="tab-content" id="tratamentos">
        <h2 class="section-title">Tratamentos Registrados</h2>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Tratamento</th>
                        <th>Dosagem</th>
                        <th>Observa√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>23/03/2024</td>
                        <td>Medica√ß√£o X</td>
                        <td>50mg</td>
                        <td>Administrar uma vez ao dia</td>
                    </tr>
                    <tr>
                        <td>23/03/2024</td>
                        <td>Fisioterapia</td>
                        <td>Sess√µes semanais</td>
                        <td>Fortalecimento</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="text-center">
            <button class="btn-secondary-action" onclick="alert('Adicionar Tratamento')">
                Adicionar Tratamento
            </button>
        </div>
    </div>
</main>

<script>

function saveAuth(data) {
    localStorage.setItem('authToken', data.token);
    localStorage.setItem('userName', data.user.nome);
}

function clearAuth() {
    localStorage.removeItem('authToken');
    localStorage.removeItem('userName');
}

function isLogged() {
    return !!localStorage.getItem('authToken');
}

function getUserName() {
    return localStorage.getItem('userName') || 'Usu√°rio';
}

function renderHeader(navContainerId) {
    const nav = document.getElementById(navContainerId);
    if (!nav) {
        console.error('Elemento navButtons n√£o encontrado');
        return;
    }

    nav.innerHTML = '';

    if (isLogged()) {
        const avatar = document.createElement('div');
        avatar.className = 'user-avatar';
        avatar.textContent = getUserName().trim().charAt(0).toUpperCase();
        avatar.title = 'Clique para sair';
        avatar.style.cursor = 'pointer';
        avatar.onclick = function() {
            if (confirm('Sair da conta?')) {
                clearAuth();
                renderHeader(navContainerId);
                window.location.href = '/views/home.html';
            }
        };
        nav.appendChild(avatar);
    } else {
        const login = document.createElement('a');
        login.href = '/views/login.html';
        login.className = 'btn-secondary';
        login.textContent = 'Cadastro/Login';
        nav.appendChild(login);
    }
}

function switchTabs(tabId) {
    console.log('üîÑ Trocando para aba:', tabId);

    const allTabs = document.querySelectorAll('.tab');
    allTabs.forEach(function(tab) {
        tab.classList.remove('active');
    });

    const allContents = document.querySelectorAll('.tab-content');
    allContents.forEach(function(content) {
        content.classList.remove('active');
    });

    const targetTab = document.querySelector('.tab[data-tab="' + tabId + '"]');
    if (targetTab) {
        targetTab.classList.add('active');
        console.log('‚úÖ Aba ativada:', tabId);
    } else {
        console.error('‚ùå Aba n√£o encontrada:', tabId);
    }

    const targetContent = document.getElementById(tabId);
    if (targetContent) {
        targetContent.classList.add('active');
        console.log('‚úÖ Conte√∫do ativado:', tabId);
    } else {
        console.error('‚ùå Conte√∫do n√£o encontrado:', tabId);
    }
}

document.addEventListener('DOMContentLoaded', function() {
    console.log('‚úÖ DOM carregado - Prontu√°rio');

    if (!isLogged()) {
        console.log('‚ö†Ô∏è Usu√°rio n√£o logado, criando sess√£o fake');
        saveAuth({ token: 'session', user: { nome: 'Clara' } });
    }

    renderHeader('navButtons');

    const tabs = document.querySelectorAll('.tab');
    console.log('üìã Total de abas encontradas:', tabs.length);

    tabs.forEach(function(tab, index) {
        const tabId = tab.getAttribute('data-tab');
        console.log('üîó Configurando aba ' + (index + 1) + ':', tabId);

        tab.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('üñ±Ô∏è Clique na aba:', tabId);
            switchTabs(tabId);
        });
    });

    const btnLinks = document.querySelectorAll('.btn-link');
    btnLinks.forEach(function(link) {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            alert('Visualiza√ß√£o indispon√≠vel.');
        });
    });

    console.log('‚úÖ Prontu√°rio inicializado com sucesso');
});
</script>
</body>
</html>
